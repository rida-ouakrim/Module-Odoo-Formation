<odoo>
  <template id="OCR.report_session_document">
    <t t-call="web.external_layout">
      <main class="page">
        <t t-foreach="docs" t-as="doc">

          <style>
            .session-header {
              background: #e4e4e4ff;
              color: white;
              padding: 25px 40px;
              margin-bottom: 35px;
              border-bottom: 3px solid #34495e;
            }
            .session-title {
              font-size: 24px;
              font-weight: 600;
              margin: 0;
              text-align: center;
              letter-spacing: 0.5px;
            }
            .info-section {
              background: white;
              padding: 30px 40px;
              margin: 0 auto 30px auto;
              max-width: 750px;
              border: 1px solid #e0e0e0;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table tr {
              border-bottom: 1px solid #f0f0f0;
            }
            .info-table tr:last-child {
              border-bottom: none;
            }
            .info-table td {
              padding: 14px 20px;
              text-align: left;
            }
            .info-table td:first-child {
              font-weight: 600;
              color: #2c3e50;
              width: 35%;
              font-size: 14px;
            }
            .info-table td:last-child {
              color: #555;
              text-align: right;
              font-size: 14px;
            }
            .status-badge {
              display: inline-block;
              padding: 5px 15px;
              border-radius: 3px;
              font-weight: 500;
              font-size: 13px;
              border: 1px solid;
            }
            .status-draft {
              background: #fff;
              color: #7f8c8d;
              border-color: #bdc3c7;
            }
            .status-open {
              background: #fff;
              color: #2c3e50;
              border-color: #34495e;
            }
            .status-done {
              background: #2c3e50;
              color: white;
              border-color: #2c3e50;
            }
            .status-cancelled {
              background: #fff;
              color: #e74c3c;
              border-color: #e74c3c;
            }
            .participants-section {
              background: white;
              padding: 30px 40px;
              border: 1px solid #e0e0e0;
              margin: 0 auto;
              max-width: 750px;
            }
            .section-title {
              font-size: 16px;
              font-weight: 600;
              color: #2c3e50;
              margin: 0 0 20px 0;
              padding-bottom: 12px;
              border-bottom: 2px solid #2c3e50;
              text-transform: uppercase;
              letter-spacing: 1px;
            }
            .participants-grid {
              display: grid;
              grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
              gap: 10px;
              margin-top: 20px;
            }
            .participant-card {
              background: #fafafa;
              padding: 12px 16px;
              border: 1px solid #e0e0e0;
              border-left: 3px solid #2c3e50;
              font-size: 14px;
              color: #2c3e50;
              font-weight: 500;
              transition: all 0.2s ease;
            }
            .participant-card:hover {
              background: #f5f5f5;
              border-left-color: #34495e;
            }
            .no-participants {
              text-align: center;
              padding: 30px;
              color: #7f8c8d;
              font-style: italic;
              background: #fafafa;
              border: 1px dashed #e0e0e0;
              font-size: 14px;
            }
            .page-break-after {
              page-break-after: always;
            }
          </style>

          <div>
            <div class="session-header">
              <h2 class="session-title">
                Fiche de Session : <t t-esc="doc.name"/>
              </h2>
            </div>

            <div class="info-section">
              <table class="info-table">
                <tr>
                  <td>Date d√©but</td>
                  <td><t t-esc="doc.date_debut"/></td>
                </tr>
                <tr>
                  <td>Date fin</td>
                  <td><t t-esc="doc.date_fin"/></td>
                </tr>
                <tr>
                  <td>Dur√©e</td>
                  <td><t t-esc="doc.duration"/> heures</td>
                </tr>
                <tr>
                  <td>Formateur</td>
                  <td><t t-esc="doc.trainer_id.name"/></td>
                </tr>
                <tr>
                  <td>√âtat de la session</td>
                  <td>
                    <t t-if="doc.state == 'draft'">
                      <span class="status-badge status-draft">Pr√©paration</span>
                    </t>
                    <t t-elif="doc.state == 'open'">
                      <span class="status-badge status-open">Ouverte</span>
                    </t>
                    <t t-elif="doc.state == 'done'">
                      <span class="status-badge status-done">Cl√¥tur√©e</span>
                    </t>
                    <t t-else="">
                      <span class="status-badge status-cancelled">Annul√©e</span>
                    </t>
                  </td>
                </tr>
              </table>
            </div>

            <div class="participants-section">
              <h3 class="section-title">Liste des participants</h3>
              
              <div class="participants-grid">
                <t t-foreach="doc.attendee_ids" t-as="p">
                  <div class="participant-card">
                    <t t-esc="p.name"/>
                  </div>
                </t>
              </div>

              <t t-if="not doc.attendee_ids">
                <div class="no-participants">
                  Aucun participant enregistr√© pour cette session.
                </div>
              </t>
            </div>
          </div>

          <!-- üü¢ Ajout du saut de page apr√®s chaque session -->
          <div class="page-break-after"></div>

        </t>
      </main>
    </t>
  </template>
</odoo>
